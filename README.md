# Blockchain Chain of Custody
## Vidhi Bhargava

####  Background:
Blockchain technology is used in digital forensics to hold various elements of evidence, log changes made, record evidence being checked in, checked out, and why something was removed. The forensics investigator can then use this evidence to make decisions. This evidence can also potentially be presented in court and assist with the decision of a final verdict in a criminal justice case. 


####  Requirements:
I was tasked with developing software that could create, or read from, a blockchain chain of custody file. This chain of custody file stores the blockchain in a binary file. Each block in the file contains the following information: SHA1 hash of the previous block, timestamp of the current time when that entry was logged, case ID, evidence item ID, state, length of the data, and finally, the data. The previous hash field is allocated precisely 20 bytes. The timestamps are given 8 bytes and are stored in UTC. The case ID must be a valid UUID, is allocated 16 bytes in the block, and is stored as an integer. The item ID is given 4 bytes and stored as an integer. The state field can have the following string values only: INITIAL, CHECKEDIN, CHECKOUT, DISPOSED, DESTROYED, RELEASED. The state field is given 11 bytes in the block. The data length field is a 4-byte integer. Furthermore, the data section is given the length of the data length field (i.e., between 0 and 2^32). 

Seven actions must be implemented and functional in the blockchain chain of custody software. The add action allows the user to add additional evidence items to the blockchain. The new evidence item must be accompanied by the case ID to which it should be associated. If either the case ID or item ID is not specified in the arguments of the CLI command, the program should exit in error. Multiple evidence IDs can be added at once for additional convenience. The checkout action records a blockchain evidence checkout. In the arguments, the evidence ID must be specified. Otherwise, the program will exit with an error. An error should occur if the evidence ID has already been checked out or has not yet been checked in. The check-in action records the evidence being checked into the blockchain. In the arguments, the evidence ID must be specified. Otherwise, the program will exit with an error. An error should result if the evidence ID has already been checked in and is not currently checked out. Using the log action, the user can see a log of all the actions taken on the evidence items (i.e., see the entire chain of custody). The user can specify if they want to see the list in reverse. By specifying a case ID in the arguments, the user can choose to display only entries that match that case ID. Similarly, the user can curate the list by specifying an evidence ID. The user should also be able to specify a specific maximum number of entries that they would like to see. Any of these options can be combined to meet the user's needs. The remove action allows the user to remove an evidence item from the chain. Once the item has been removed, the program should prevent any other action from being performed upon that evidence item. The evidence item ID must be specified in the remove command; otherwise, the program should result in an error. Also, only checked-in items can be removed. If the item the user is trying to remove is not in the CHECKEDIN state, the program should throw an error. The init action is used to create the initial block if one has not already been created. Furthermore, the verify action verifies that all the entries in the blockchain are valid. It will result in an error if this is not the case.

####  Design:

####  Challenges:
My choice of the programming language used for the project was Python, and with this choice came many struggles, such as the library implementation, especially when dealing with the structures. The process and exact syntax for reading blocks in bytes were also a concern as the data unpacking. I chose the language of Python because it was a language we were comfortable with and had some previous knowledge, and had lots of familiarity with the syntax. The blockchain was parsed by reading the correct number of bytes corresponding to the size of each block from the blockchain file, and then we unpacked those bytes. The method ._make() from the "namedtuples" was used to parse the data and transport it into the appropriate sections(i.e., item_id, case_id, sha1_hash, etc.). The main challenge that can be said with unpacking this data was how to create maximum efficiency when distributing into each section, and the ._make() method incorporates the syntax from the website "https://docs.python.org/3/library/struct.html" we learned the lesson that you must use a formatted buffer unpack tactic. This struct returns the byte values of string format, and the result must be the tuple if it only contains one item, which is crucial for us because of the check-in to see if the block with the previous hash was valid.


####  Discussion:
A blockchain chain of custody solution is undoubtedly reasonable in specific industries like criminal justice, commercial transportation, and other industries where the tracking and logging of the custody and location of specific items are vital. This method allows for storing the detailed chronological history of any relevant item, complete with timestamps of when the status of that particular item's status changed (e.g., changed custody, removed from the list, etc.). This blockchain can also be shared with anyone anytime that needs to see the history of any tracked item. The blockchain can be protected with encryption and read/write permissions to maintain its integrity and deny unauthorized access. 

There are certainly cons to the implementation of blockchain technology. Securing the blockchain is not a simple task, and it requires extreme vigilance and expertise. Mistakes can be made, and sensitive data can be leaked or modified by an unauthorized party. A highly skilled, trained professional must be hired to implement the blockchain and maintain its security. This hiring of professionals comes with a high cost which might outweigh the potential benefits of having the blockchain in some contexts.

Therefore, a digital blockchain chain of custody solution, such as was implemented in this project, is a reasonable solution in some contexts. However, it certainly has downsides that must be weighed against the upsides before a solution can be decided upon the blockchain chain of custody. 



